<div class='row'>
  <!-- gives space for results -->
  <div id='results'>
  </div>
  <div>
  <%= button_tag "Roll Again", id: "next" %>
  <button id="map_me">Get me there!</button>
  </div>
  <!-- < % = button_tag "Map", user_path %> -->
</div>
<!-- address is grabbed from the form via the data attribute -->
<div id="location" data-loc= "<%= @current_location %>"></div>

<!-- gives the map space on the page -->
<div id="map"></div>
<script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV["GMAPS_KEY"]%>&libraries=places&callback=initialize" async defer></script>
<!-- <img src="< %= @response.businesses[0].image_url %>"> -->
<!-- < % @response.businesses[0].location.coordinate.latitude %> -->

<script type="text/javascript">

  var responses = [
    '<div id="response0" data-coords0="<%= @response.businesses[0].location.coordinate.latitude %>, <%= @response.businesses[0].location.coordinate.longitude %>" class="results"><img src="<%= @response.businesses[0].image_url %>"><h2><%= @response.businesses[0].name %></h2><h4><div class="glyphicon glyphicon-earphone"></div> <%= @response.businesses[0].phone %></h4><h4><%= @response.businesses[0].location.address %></h4><h4><%= @response.businesses[0].location.city %></h4><h4><%= @response.businesses[0].location.state_code %></h4><h4><%= @response.businesses[0].location.postal_code %></h4><h4>Rating: <%= @response.businesses[0].rating %></h4><h4>Review Snippet: <%= @response.businesses[0].snippet_text.gsub("\n", " ") %></h4></div>',
    '<div id="response1" data-coords1="<%= @response.businesses[1].location.coordinate.latitude %>, <%= @response.businesses[1].location.coordinate.longitude %>"  class="results"><img src="<%= @response.businesses[1].image_url %>"<br><h2><%= @response.businesses[1].name %></h2><h4><div class="glyphicon glyphicon-earphone"></div> <%= @response.businesses[1].phone %></h4><h4><%= @response.businesses[1].location.address %></h4><h4><%= @response.businesses[1].location.city %></h4><h4><%= @response.businesses[1].location.state_code %></h4><h4><%= @response.businesses[1].location.postal_code %></h4><h4>Rating: <%= @response.businesses[1].rating %></h4><h4>Review Snippet: <%= @response.businesses[1].snippet_text.gsub("\n", " ") %></h4></div>',
    '<div id="response2" data-coords2="<%= @response.businesses[2].location.coordinate.latitude %>, <%= @response.businesses[2].location.coordinate.longitude %>"  class="results"><img src="<%= @response.businesses[2].image_url %>"<br><h2><%= @response.businesses[2].name %></h2><h4><div class="glyphicon glyphicon-earphone"></div> <%= @response.businesses[2].phone %></h4><h4><%= @response.businesses[2].location.address %></h4><h4><%= @response.businesses[2].location.city %></h4><h4><%= @response.businesses[2].location.state_code %></h4><h4><%= @response.businesses[2].location.postal_code %></h4><h4>Rating: <%= @response.businesses[2].rating %></h4><h4>Review Snippet: <%= @response.businesses[2].snippet_text.gsub("\n", " ") %></h4></div>',
    '<div id="response3" data-coords3="<%= @response.businesses[3].location.coordinate.latitude %>, <%= @response.businesses[3].location.coordinate.longitude %>"  class="results"><img src="<%= @response.businesses[3].image_url %>"<br><h2><%= @response.businesses[3].name %></h2><h4><div class="glyphicon glyphicon-earphone"></div> <%= @response.businesses[3].phone %></h4><h4><%= @response.businesses[3].location.address %></h4><h4><%= @response.businesses[3].location.city %></h4><h4><%= @response.businesses[3].location.state_code %></h4><h4><%= @response.businesses[3].location.postal_code %></h4><h4>Rating: <%= @response.businesses[3].rating %></h4><h4>Review Snippet: <%= @response.businesses[3].snippet_text.gsub("\n", " ") %></h4></div>',
    '<div id="response4" data-coords4="<%= @response.businesses[4].location.coordinate.latitude %>, <%= @response.businesses[4].location.coordinate.longitude %>"  class="results"><img src="<%= @response.businesses[4].image_url %>"<br><h2><%= @response.businesses[4].name %></h2><h4><div class="glyphicon glyphicon-earphone"></div> <%= @response.businesses[4].phone %></h4><h4><%= @response.businesses[4].location.address %></h4><h4><%= @response.businesses[4].location.city %></h4><h4><%= @response.businesses[4].location.state_code %></h4><h4><%= @response.businesses[4].location.postal_code %></h4><h4>Rating: <%= @response.businesses[4].rating %></h4><h4>Review Snippet: <%= @response.businesses[4].snippet_text.gsub("\n", " ") %></h4></div>',
    '<div id="response5" data-coords5="<%= @response.businesses[5].location.coordinate.latitude %>, <%= @response.businesses[5].location.coordinate.longitude %>"  class="results"><img src="<%= @response.businesses[5].image_url %>"<br><h2><%= @response.businesses[5].name %></h2><h4><div class="glyphicon glyphicon-earphone"></div> <%= @response.businesses[5].phone %></h4><h4><%= @response.businesses[5].location.address %></h4><h4><%= @response.businesses[5].location.city %></h4><h4><%= @response.businesses[5].location.state_code %></h4><h4><%= @response.businesses[5].location.postal_code %></h4><h4>Rating: <%= @response.businesses[5].rating %></h4><h4>Review Snippet: <%= @response.businesses[5].snippet_text.gsub("\n", " ") %></h4></div>',
    '<div id="response6" data-coords6="<%= @response.businesses[6].location.coordinate.latitude %>, <%= @response.businesses[6].location.coordinate.longitude %>"  class="results"><img src="<%= @response.businesses[6].image_url %>"<br><h2><%= @response.businesses[6].name %></h2><h4><div class="glyphicon glyphicon-earphone"></div> <%= @response.businesses[6].phone %></h4><h4><%= @response.businesses[6].location.address %></h4><h4><%= @response.businesses[6].location.city %></h4><h4><%= @response.businesses[6].location.state_code %></h4><h4><%= @response.businesses[6].location.postal_code %></h4><h4>Rating: <%= @response.businesses[6].rating %></h4><h4>Review Snippet: <%= @response.businesses[6].snippet_text.gsub("\n", " ") %></h4></div>',
    '<div id="response7" data-coords7="<%= @response.businesses[7].location.coordinate.latitude %>, <%= @response.businesses[7].location.coordinate.longitude %>"  class="results"><img src="<%= @response.businesses[7].image_url %>"<br><h2><%= @response.businesses[7].name %></h2><h4><div class="glyphicon glyphicon-earphone"></div> <%= @response.businesses[7].phone %></h4><h4><%= @response.businesses[7].location.address %></h4><h4><%= @response.businesses[7].location.city %></h4><h4><%= @response.businesses[7].location.state_code %></h4><h4><%= @response.businesses[7].location.postal_code %></h4><h4>Rating: <%= @response.businesses[7].rating %></h4><h4>Review Snippet: <%= @response.businesses[7].snippet_text.gsub("\n", " ") %></h4></div>',
    '<div id="response8" data-coords8="<%= @response.businesses[8].location.coordinate.latitude %>, <%= @response.businesses[8].location.coordinate.longitude %>"  class="results"><img src="<%= @response.businesses[8].image_url %>"<br><h2><%= @response.businesses[8].name %></h2><h4><div class="glyphicon glyphicon-earphone"></div> <%= @response.businesses[8].phone %></h4><h4><%= @response.businesses[8].location.address %></h4><h4><%= @response.businesses[8].location.city %></h4><h4><%= @response.businesses[8].location.state_code %></h4><h4><%= @response.businesses[8].location.postal_code %></h4><h4>Rating: <%= @response.businesses[8].rating %></h4><h4>Review Snippet: <%= @response.businesses[8].snippet_text.gsub("\n", " ") %></h4></div>',
    '<div id="response9" data-coords9="<%= @response.businesses[9].location.coordinate.latitude %>, <%= @response.businesses[9].location.coordinate.longitude %>"  class="results"><img src="<%= @response.businesses[9].image_url %>"<br><h2><%= @response.businesses[9].name %></h2><h4><div class="glyphicon glyphicon-earphone"></div> <%= @response.businesses[9].phone %></h4><h4><%= @response.businesses[9].location.address %></h4><h4><%= @response.businesses[9].location.city %></h4><h4><%= @response.businesses[9].location.state_code %></h4><h4><%= @response.businesses[9].location.postal_code %></h4><h4>Rating: <%= @response.businesses[9].rating %></h4><h4>Review Snippet: <%= @response.businesses[9].snippet_text.gsub("\n", " ") %></h4></div>',
    '<div id="response10" data-coords10="<%= @response.businesses[10].location.coordinate.latitude %>, <%= @response.businesses[10].location.coordinate.longitude %>"  class="results"><img src="<%= @response.businesses[10].image_url %>"<br><h2><%= @response.businesses[10].name %></h2><h4><div class="glyphicon glyphicon-earphone"></div> <%= @response.businesses[10].phone %></h4><h4><%= @response.businesses[10].location.address %></h4><h4><%= @response.businesses[10].location.city %></h4><h4><%= @response.businesses[10].location.state_code %></h4><h4><%= @response.businesses[10].location.postal_code %></h4><h4>Rating: <%= @response.businesses[10].rating %></h4><h4>Review Snippet: <%= @response.businesses[10].snippet_text.gsub("\n", " ") %></h4></div>',
    '<div id="response11" data-coords11="<%= @response.businesses[11].location.coordinate.latitude %>, <%= @response.businesses[11].location.coordinate.longitude %>"  class="results"><img src="<%= @response.businesses[11].image_url %>"<br><h2><%= @response.businesses[11].name %></h2><h4><div class="glyphicon glyphicon-earphone"></div> <%= @response.businesses[11].phone %></h4><h4><%= @response.businesses[11].location.address %></h4><h4><%= @response.businesses[11].location.city %></h4><h4><%= @response.businesses[11].location.state_code %></h4><h4><%= @response.businesses[11].location.postal_code %></h4><h4>Rating: <%= @response.businesses[11].rating %></h4><h4>Review Snippet: <%= @response.businesses[11].snippet_text.gsub("\n", " ") %></h4></div>',
    '<div id="response12" data-coords12="<%= @response.businesses[12].location.coordinate.latitude %>, <%= @response.businesses[12].location.coordinate.longitude %>"  class="results"><img src="<%= @response.businesses[12].image_url %>"<br><h2><%= @response.businesses[12].name %></h2><h4><div class="glyphicon glyphicon-earphone"></div> <%= @response.businesses[12].phone %></h4><h4><%= @response.businesses[12].location.address %></h4><h4><%= @response.businesses[12].location.city %></h4><h4><%= @response.businesses[12].location.state_code %></h4><h4><%= @response.businesses[12].location.postal_code %></h4><h4>Rating: <%= @response.businesses[12].rating %></h4><h4>Review Snippet: <%= @response.businesses[12].snippet_text.gsub("\n", " ") %></h4></div>',
    '<div id="response13" data-coords13="<%= @response.businesses[13].location.coordinate.latitude %>, <%= @response.businesses[13].location.coordinate.longitude %>"  class="results"><img src="<%= @response.businesses[13].image_url %>"<br><h2><%= @response.businesses[13].name %></h2><h4><div class="glyphicon glyphicon-earphone"></div> <%= @response.businesses[13].phone %></h4><h4><%= @response.businesses[13].location.address %></h4><h4><%= @response.businesses[13].location.city %></h4><h4><%= @response.businesses[13].location.state_code %></h4><h4><%= @response.businesses[13].location.postal_code %></h4><h4>Rating: <%= @response.businesses[13].rating %></h4><h4>Review Snippet: <%= @response.businesses[13].snippet_text.gsub("\n", " ") %></h4></div>',
    '<div id="response14" data-coords14="<%= @response.businesses[14].location.coordinate.latitude %>, <%= @response.businesses[14].location.coordinate.longitude %>"  class="results"><img src="<%= @response.businesses[14].image_url %>"<br><h2><%= @response.businesses[14].name %></h2><h4><div class="glyphicon glyphicon-earphone"></div> <%= @response.businesses[14].phone %></h4><h4><%= @response.businesses[14].location.address %></h4><h4><%= @response.businesses[14].location.city %></h4><h4><%= @response.businesses[14].location.state_code %></h4><h4><%= @response.businesses[14].location.postal_code %></h4><h4>Rating: <%= @response.businesses[14].rating %></h4><h4>Review Snippet: <%= @response.businesses[14].snippet_text.gsub("\n", " ") %></h4></div>',
    '<div id="response15" data-coords15="<%= @response.businesses[15].location.coordinate.latitude %>, <%= @response.businesses[15].location.coordinate.longitude %>"  class="results"><img src="<%= @response.businesses[15].image_url %>"<br><h2><%= @response.businesses[15].name %></h2><h4><div class="glyphicon glyphicon-earphone"></div> <%= @response.businesses[15].phone %></h4><h4><%= @response.businesses[15].location.address %></h4><h4><%= @response.businesses[15].location.city %></h4><h4><%= @response.businesses[15].location.state_code %></h4><h4><%= @response.businesses[15].location.postal_code %></h4><h4>Rating: <%= @response.businesses[15].rating %></h4><h4>Review Snippet: <%= @response.businesses[15].snippet_text.gsub("\n", " ") %></h4></div>',
    '<div id="response16" data-coords16="<%= @response.businesses[16].location.coordinate.latitude %>, <%= @response.businesses[16].location.coordinate.longitude %>"  class="results"><img src="<%= @response.businesses[16].image_url %>"<br><h2><%= @response.businesses[16].name %></h2><h4><div class="glyphicon glyphicon-earphone"></div> <%= @response.businesses[16].phone %></h4><h4><%= @response.businesses[16].location.address %></h4><h4><%= @response.businesses[16].location.city %></h4><h4><%= @response.businesses[16].location.state_code %></h4><h4><%= @response.businesses[16].location.postal_code %></h4><h4>Rating: <%= @response.businesses[16].rating %></h4><h4>Review Snippet: <%= @response.businesses[16].snippet_text.gsub("\n", " ") %></h4></div>',
    '<div id="response17" data-coords17="<%= @response.businesses[17].location.coordinate.latitude %>, <%= @response.businesses[17].location.coordinate.longitude %>"  class="results"><img src="<%= @response.businesses[17].image_url %>"<br><h2><%= @response.businesses[17].name %></h2><h4><div class="glyphicon glyphicon-earphone"></div> <%= @response.businesses[17].phone %></h4><h4><%= @response.businesses[17].location.address %></h4><h4><%= @response.businesses[17].location.city %></h4><h4><%= @response.businesses[17].location.state_code %></h4><h4><%= @response.businesses[17].location.postal_code %></h4><h4>Rating: <%= @response.businesses[17].rating %></h4><h4>Review Snippet: <%= @response.businesses[17].snippet_text.gsub("\n", " ") %></h4></div>',
    '<div id="response18" data-coords18="<%= @response.businesses[18].location.coordinate.latitude %>, <%= @response.businesses[18].location.coordinate.longitude %>"  class="results"><img src="<%= @response.businesses[18].image_url %>"<br><h2><%= @response.businesses[18].name %></h2><h4><div class="glyphicon glyphicon-earphone"></div> <%= @response.businesses[18].phone %></h4><h4><%= @response.businesses[18].location.address %></h4><h4><%= @response.businesses[18].location.city %></h4><h4><%= @response.businesses[18].location.state_code %></h4><h4><%= @response.businesses[18].location.postal_code %></h4><h4>Rating: <%= @response.businesses[18].rating %></h4><h4>Review Snippet: <%= @response.businesses[18].snippet_text.gsub("\n", " ") %></h4></div>',
    '<div id=="response19" data-coords19="<%= @response.businesses[19].location.coordinate.latitude %>, <%= @response.businesses[19].location.coordinate.longitude %>"  class="results"><img src="<%= @response.businesses[19].image_url %>"<br><h2><%= @response.businesses[19].name %></h2><h4><div class="glyphicon glyphicon-earphone"></div> <%= @response.businesses[19].phone %></h4><h4><%= @response.businesses[19].location.address %></h4><h4><%= @response.businesses[19].location.city %></h4><h4><%= @response.businesses[19].location.state_code %></h4><h4><%= @response.businesses[19].location.postal_code %></h4><h4>Rating: <%= @response.businesses[19].rating %></h4><h4>Review Snippet: <%= @response.businesses[19].snippet_text.gsub("\n", " ") %></h4></div>'
  ]
  var i = 0
  // first result is added to page here
  $('#results').append(responses[i])

  $('#next').css({
    "display": "block",
    "margin": "0 auto",
  });
  // upon next button click, preceding result is emptied from page and next result is added to page
  $('#next').click(function(){
    i++
    if(i == 20){
      $('#next').hide()
    }
    $('#results').empty();
    $('#results').append(responses[i])
  })
</script>